<html>
	<head>
		<title>Click Counter</title>
		<meta name="viewport" content="width=device-width">
		<meta name="author" content="Avi Aryan">
		<link rel="author" href="https://plus.google.com/u/0/+AviAryan/posts">
		<script>
			// Parameters
			var timelimit = 15;
		</script>

		<style>
			.nb {
				font-weight: normal;
			}
			div#app {
				max-width: 500px;
				width: 95%;
				width: inherit;
				margin-left: auto;
				margin-right: auto;
				margin-top: 3em;
				background: #B7D36A;
				padding: 2em 3em 3em 3em;
				border-radius: 5em;
				font-size: 16px;
			}
			button#ctb { width: 8em; }
		</style>
	</head>

	<body>
		<h1 align=center>Click Counter</h1>
		<hr>
		
		<div id="app">

		<h3 class="nb">Clicking on the left-side button will start the counter. Then continue clicking on it to record your clicks.</h3>

		<br><br>

		<button id="ctb"><font size="+5" id="ct">0</font></button>
		<font size="+5" id="tl" style="float: right;"></font>
		</h1>

		<div style="margin-top: 5em;">Result : <span id="res"></span><br><br>
		<button onclick="resetCt();">Reset</button></div>

		</div>
		
		<script type="text/javascript">

			document.getElementById("tl").innerHTML = timelimit;

			var counter = document.getElementById("ct");
			var counterBtn = document.getElementById("ctb");
			var result = document.getElementById("res");
			var timeleft = document.getElementById("tl");
			var mto, ito;

			var onclick_event = function(){
				if (counter.innerHTML == "0"){
					mto = setTimeout(EndCt, timelimit * 1000);
					timeleft.innerHTML = timelimit;
					ito = setTimeout(SetTl, 1000);
					document.getElementById("res").innerHTML = "";
				}
				counter.innerHTML = Number(counter.innerHTML)+1;
			};

			counterBtn.onclick = onclick_event;

			function EndCt(){
				counterBtn.onclick = "";
				res.innerHTML = counter.innerHTML + " clicks in " + timelimit + " seconds . Average of " + (Number(counter.innerHTML)/timelimit).toFixed(2);
			}

			function SetTl(){
				if (timeleft.innerHTML == "1"){
					timeleft.innerHTML = "0";
					return;
				}
				timeleft.innerHTML = Number(timeleft.innerHTML)-1;
				ito = setTimeout(SetTl, 1000);
			}

			function resetCt(){
				counter.innerHTML = 0;
				timeleft.innerHTML = timelimit;
				counterBtn.onclick = onclick_event;
				clearTimeout(mto);
				clearTimeout(ito);
			}

		</script>
	

	</body>
</html>
